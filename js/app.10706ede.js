(function(e){function t(t){for(var a,s,o=t[0],u=t[1],c=t[2],d=0,p=[];d<o.length;d++)s=o[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&p.push(n[s][0]),n[s]=0;for(a in u)Object.prototype.hasOwnProperty.call(u,a)&&(e[a]=u[a]);l&&l(t);while(p.length)p.shift()();return i.push.apply(i,c||[]),r()}function r(){for(var e,t=0;t<i.length;t++){for(var r=i[t],a=!0,o=1;o<r.length;o++){var u=r[o];0!==n[u]&&(a=!1)}a&&(i.splice(t--,1),e=s(s.s=r[0]))}return e}var a={},n={app:0},i=[];function s(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,s),r.l=!0,r.exports}s.m=e,s.c=a,s.d=function(e,t,r){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(s.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)s.d(r,a,function(t){return e[t]}.bind(null,a));return r},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;i.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";r("85ec")},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var a=r("2b0e"),n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[r("Dashboard")],1)},i=[],s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("p",[r("label",{attrs:{for:"selectGraph"}},[e._v("Type de graphique : ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedChartProp,expression:"selectedChartProp"}],attrs:{id:"selectGraph"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedChartProp=t.target.multiple?r:r[0]}}},e._l(e.chartTypes,(function(t){return r("option",{key:t.prop,domProps:{value:t.prop}},[e._v(" "+e._s(t.label)+" ")])})),0)]),r("p",[r("label",{attrs:{for:"selectPeriod"}},[e._v("Période affichée : ")]),r("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedPeriod,expression:"selectedPeriod"}],attrs:{id:"selectPeriod"},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.selectedPeriod=t.target.multiple?r:r[0]}}},e._l(e.periods,(function(t){return r("option",{key:t.code,domProps:{value:t.code}},[e._v(" "+e._s(t.label)+" ")])})),0)]),r("p",[e._v(e._s(e.chartTitle)+" au "+e._s(e.latestDate)+" : "+e._s(e.latestValue))]),r("Graphique",{attrs:{title:e.chartTitle,values:e.chartData}})],1)},o=[],u=(r("7db0"),r("d81d"),r("fb6a"),r("b680"),r("d3b7"),r("96cf"),r("1da1")),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("h1",[e._v(e._s(e.title))]),r("Trend",{attrs:{smooth:"","auto-draw":"",min:"0",data:e.values}}),r("hr")],1)},l=[],d=r("da19"),p={name:"Graphique",components:{Trend:d["a"]},props:{title:String,values:{type:Array,default:function(){return[]}}}},h=p,f=r("2877"),v=Object(f["a"])(h,c,l,!1,null,null,null),m=v.exports,b=r("2ef0"),y=r.n(b),g="https://dashboard.covid19.data.gouv.fr/data/code-FRA.json",D={name:"Dashboard",components:{Graphique:m},data:function(){return{rawData:[],selectedChartProp:"decesHebdomadaire",selectedPeriod:"last30days"}},computed:{chartTypes:function(){return[{label:"Décès par semaine",prop:"decesHebdomadaire"},{label:"Nouveau cas par semaine",prop:"casHebdomadaire"},{label:"Positivité",prop:"positiviteHebdomadaire"},{label:"Indice de Circulation",prop:"circulationHebdomadaire"},{label:"Hospitalisés",prop:"hospitalises"},{label:"Réanimation",prop:"reanimation"}]},periods:function(){return[{label:"Depuis mars 2020",code:"wholeData"},{label:"7 derniers jours",code:"last7days"},{label:"30 derniers jours",code:"last30days"}]},chartData:function(){var e=this[this.selectedChartProp];switch(this.selectedPeriod){case"last7days":return e.slice(-7);case"last30days":return e.slice(-30);default:return e}},chartTitle:function(){var e=this,t=this.chartTypes.find((function(t){return t.prop===e.selectedChartProp}));return t.label},hasData:function(){return this.rawData&&this.rawData.length},latestDate:function(){var e=this.sortedData,t=this.hasData&&e[e.length-1];return t.date},latestValue:function(){var e=this.chartData,t=this.chartData&&e[e.length-1];return this.formatValue(t)},sortedData:function(){return y.a.orderBy(this.rawData,["date"])},deces:function(){return this.getDailyValues("deces")},decesQuotidien:function(){return this.getDailyDelta(this.deces)},decesHebdomadaire:function(){return this.getWeeklyData(this.decesQuotidien)},casConfirmes:function(){return this.getDailyValues("casConfirmes")},casQuotidien:function(){return this.getDailyDelta(this.casConfirmes)},casHebdomadaire:function(){return this.getWeeklyData(this.casQuotidien)},hospitalises:function(){return this.getDailyValues("hospitalises")},reanimation:function(){return this.getDailyValues("reanimation")},testsRealises:function(){return this.getDailyValues("testsRealises")},testsPositifs:function(){return this.getDailyValues("testsPositifs")},positivite:function(){return y.a.zipWith(this.testsRealises,this.testsPositifs,(function(e,t){return t/e||0}))},positiviteHebdomadaire:function(){return this.getWeeklyData(this.positivite).map((function(e){return 100*e/7}))},circulationHebdomadaire:function(){return y.a.zipWith(this.casHebdomadaire,this.positiviteHebdomadaire,(function(e,t){return e*t}))}},mounted:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,r="https://cors-anywhere.herokuapp.com/"+g,t.next=4,e.fetchData(r);case 4:e.rawData=t.sent,t.next=12;break;case 7:return t.prev=7,t.t0=t["catch"](0),t.next=11,e.fetchData("/data/code-FRA.json");case 11:e.rawData=t.sent;case 12:case"end":return t.stop()}}),t,null,[[0,7]])})))()},methods:{fetchData:function(e){return Object(u["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch(e);case 2:return r=t.sent,t.next=5,r.json();case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))()},getDailyValues:function(e){if(!this.sortedData.length)return[];for(var t=[this.sortedData[0][e]||0],r=1;r<this.sortedData.length;r++){var a=this.sortedData[r][e];t[r]=a||t[r-1]}return t},getDailyDelta:function(e){for(var t=[],r=0;r<e.length;r++)t[r]=e[r]-(e[r-1]||0);return t},getWeeklyData:function(e){for(var t=[],r=0;r<e.length;r++){var a=Math.max(0,r-7);t.push(y.a.sum(e.slice(a,r)||0))}return t},formatValue:function(e){switch(this.selectedChartProp){case"positiviteHebdomadaire":return e&&e.toFixed(1)+"%";case"circulationHebdomadaire":return e&&e.toFixed(0);default:return e}}}},w=D,_=Object(f["a"])(w,s,o,!1,null,null,null),P=_.exports,x={name:"App",components:{Dashboard:P}},j=x,O=(r("034f"),Object(f["a"])(j,n,i,!1,null,null,null)),H=O.exports;a["a"].config.productionTip=!1,new a["a"]({render:function(e){return e(H)}}).$mount("#app")},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.10706ede.js.map